<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Tests</title>
    <script src="../hxl.js"></script>
    <script src="../hxlBites.js"></script>
    <script src="../hxlBitesChart.js"></script>
    <script src="../hxlBitesCrossTables.js"></script>
    <script src="../hxlBitesMap.js"></script>
    <script src="../hxlBitesRender.js"></script>
    <script src="../hxlBitesTable.js"></script>
    <script src="../hxlBitesText.js"></script>
    <script
      src="https://code.jquery.com/jquery-3.3.1.min.js"
      integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
      crossorigin="anonymous"></script>
  </head>
  <body>
    <p>Open console to see tests</p>
  </body>
  <script>
    console.log('Running Tests');
  	/*$.ajax({
  		url: "https://beta.proxy.hxlstandard.org/data/1d0a79/download/africa-dtm-baseline-assessments-topline.json",
  		success: function(result){
        let output = hxlBites.data(result).getMapBites();
        console.log(output);
        if(output.length>8){
          console.error('Map Test Fail: Too many results');
        } else if (output[0].uniqueID != 'map0002/#country+code/2/#population+hh+idps/5') {
          console.error('Map Test Fail: Unexpected ID');
          console.log(output[0].uniqueID);
        } else {
          console.log('Map Test Pass');
        }

        let bite = hxlBites.data(result).reverse('map0002/#country+code/2/#population+hh+idps/5');
        console.log(bite);
        bite = hxlBites.data(result).reverse('chart0009/#country+name/1/#population+hh+idps/5');
        console.log(bite);
        bite = hxlBites.data(result).reverse('map0002/#adm1+code/4/#population+idps+ind/6');
        console.log(bite);

      },
      error: function(err){
        console.log(err);
      }
    });
    $.ajax({
      url: "https://beta.proxy.hxlstandard.org/data/1d0a79/download/africa-dtm-baseline-assessments-topline.json",
      success: function(result){
        let output = hxlBites.data(result).getTextBites();
        console.log(output);
        output = hxlBites.data(result).reverse('text0012/#population+idps+ind/6');
        console.log(output);
        console.log("Text bites success");

      },
      error: function(err){
        console.log(err);
      }
    });
    $.ajax({
      url: 'https://proxy.hxlstandard.org/data.json?filter01=cut&cut-include-tags01=%23modality%2C+%23channel&url=https%3A%2F%2Fdocs.google.com%2Fspreadsheets%2Fd%2F1s-piTxQUT0Q8ReO6uVy-72ZFb3R9K3I5zAnb2YNN83c%2Fedit%23gid%3D1496776846',
      success: function(result){
        let output = hxlBites.data(result).getChartBites();
        console.log(output);
        if(output.length==3){
          console.log("Modality chart bite success");
        } else {
          console.warn("Modality chart bite fail");
        }
      },
      error: function(err){
        console.log(err);
      }
    });
    $.ajax({
      url: 'https://proxy.hxlstandard.org/data.json?url=https%3A%2F%2Fdocs.google.com%2Fspreadsheets%2Fd%2Fe%2F2PACX-1vSrr9DRaC2fXzPdmOxLW-egSYtxmEp_RKoYGggt-zOKYXSx4RjPsM4EO19H7OJVX1esTtIoFvlKFWcn%2Fpub%3Fgid%3D1564028913%26single%3Dtrue%26output%3Dcsv',
      success: function(result){
        let output = hxlBites.data(result).getTextBites();
        console.log(output);
      },
      error: function(err){
        console.log(err);
      }
    });
    $.ajax({
      url: 'https://proxy.hxlstandard.org/data.json?url=https%3A%2F%2Fdocs.google.com%2Fspreadsheets%2Fd%2Fe%2F2PACX-1vSrr9DRaC2fXzPdmOxLW-egSYtxmEp_RKoYGggt-zOKYXSx4RjPsM4EO19H7OJVX1esTtIoFvlKFWcn%2Fpub%3Fgid%3D1564028913%26single%3Dtrue%26output%3Dcsv',
      success: function(result){
        let output = hxlBites.data(result).getTextBites();
        console.log(output);
      },
      error: function(err){
        console.log(err);
      }
    });
    $.ajax({
      url: "https://beta.proxy.hxlstandard.org/data/1d0a79/download/africa-dtm-baseline-assessments-topline.json",
      success: function(result){
        let output = hxlBites.data(result).getMapBites();
        console.log(output);
        if(output.length>8){
          console.error('Map Test Fail: Too many results');
        } else if (output[0].uniqueID != 'map0002/#country+code/2/#population+hh+idps/5') {
          console.error('Map Test Fail: Unexpected ID');
          console.log(output[0].uniqueID);
        } else {
          console.log('Map Test Pass');
        }

        let bite = hxlBites.data(result).reverse('map0002/#country+code/2/#population+hh+idps/5');
        console.log(bite);
        bite = hxlBites.data(result).reverse('chart0009/#country+name/1/#population+hh+idps/5');
        console.log(bite);
        bite = hxlBites.data(result).reverse('map0002/#adm1+code/4/#population+idps+ind/6');
        console.log(bite);

      },
      error: function(err){
        console.log(err);
      }
    });*/
    var data = [
      [
        "Reporting Entity",
        "Country",
        "Implementing National Society",
        "Movement Partner(s)",
        "Year",
        "Total Assistance Budgeted",
        "Total Assistance Expended",
        "Total Cash Planned",
        "Total Cash Expended",
        "Beneficiaries Planned",
        "Beneficiaries Actual",
        "Project Objective (Sector)",
        "Conditionality",
        "Restriction",
        "Delivery Mechanism",
        "If other E-Cash, specify",
        "ISO_Country_Code_Alpha3"
      ],
      [
        "#org+reporting",
        "#country+name",
        "#org+implementing",
        "#org+partner",
        "#date+year",
        "#value+total",
        "#value+spent",
        "#value+cash+planned",
        "#value+cash+spent",
        "#targeted",
        "#reached",
        "#sector",
        "#modality+conditionality",
        "#modality+restriction",
        "#channel",
        "#channel+ecash",
        "#country+code"
      ],
      [
        "American Red Cross",
        "United States",
        "American Red Cross",
        "",
        "2017",
        "",
        "",
        "61921615.00",
        "58370730.00",
        "90757.00",
        "90078.00",
        "Immediate/Basic Needs",
        "Unconditional",
        "Unrestricted",
        "E-cash",
        "",
        "USA"
      ],
      [
        "American Red Cross",
        "United States",
        "American Red Cross",
        "",
        "2017",
        "",
        "",
        "",
        "12828520.00",
        "",
        "25117.00",
        "Immediate/Basic Needs",
        "Unconditional",
        "Unrestricted",
        "E-cash",
        "",
        "USA"
      ],
      [
        "American Red Cross",
        "United States",
        "American Red Cross",
        "",
        "2017",
        "",
        "",
        "",
        "4044348.00",
        "",
        "10213.00",
        "Immediate/Basic Needs",
        "Unconditional",
        "Unrestricted",
        "E-cash",
        "",
        "USA"
      ],
      [
        "American Red Cross",
        "United States",
        "American Red Cross",
        "",
        "2017",
        "",
        "",
        "",
        "18918900.00",
        "",
        "47775.00",
        "Immediate/Basic Needs",
        "Unconditional",
        "Unrestricted",
        "E-cash",
        "",
        "USA"
      ],
      [
        "American Red Cross",
        "United States",
        "American Red Cross",
        "",
        "2017",
        "",
        "",
        "",
        "16904844.00",
        "",
        "42689.00",
        "Immediate/Basic Needs",
        "Unconditional",
        "Unrestricted",
        "E-cash",
        "PayPal",
        "USA"
      ],
      [
        "American Red Cross",
        "United States",
        "American Red Cross",
        "",
        "2017",
        "",
        "",
        "",
        "155911140.00",
        "",
        "393715.00",
        "Immediate/Basic Needs",
        "Unconditional",
        "Unrestricted",
        "E-cash",
        "Walmart",
        "USA"
      ],
      [
        "American Red Cross",
        "United States",
        "American Red Cross",
        "",
        "2017",
        "",
        "",
        "",
        "32072040.00",
        "",
        "80990.00",
        "Immediate/Basic Needs",
        "Unconditional",
        "Unrestricted",
        "E-cash",
        "",
        "USA"
      ]
    ];
    let output = hxlBites.data(data).getMapBites();
    console.log(output);
  </script>
</html>